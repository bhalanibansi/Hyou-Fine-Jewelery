{% schema %}
{
  "name": "Nightout", 
  "settings": [
    {
      "type": "text",
      "label": "Heading",
      "id": "heading",
      "default": "Loved the story?"
    },
   {
      "type": "textarea",
      "label": "Subtext",
      "id": "subtext",
      "default": "There’s more where that came from.\nSubscribe to our stories and we’ll send you beautifully told campaigns, behind-the-scenes moments, and product drops—straight to your inbox."
    },
    {
      "type": "color",
      "label": "Background Color",
      "id": "bg_color",
      "default": "#fdecec"
    },
    {
      "type": "text",
       "id": "button_label",
      "label": "Button Label",
      "default": "I'm in"
    }
  ],
  "presets": [
    {
      "name": "Nightout"
    }
  ]
}
{% endschema %}

{% style %}
.story-subscribe--{{ section.id }} {
  background-color: {{ section.settings.bg_color }};
  padding: 40px 20px;
  text-align: center; 
}
.story-subscribe--{{ section.id }} h2 {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 16px;
}
.story-subscribe--{{ section.id }} p {
  font-size: 16px;
  max-width: 600px;
  margin: 0 auto 24px auto;
  white-space: pre-line;
}
.story-subscribe--{{ section.id }} form {
  display: flex;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
}
.story-subscribe--{{ section.id }} input[type="email"] {
  padding: 12px 16px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 6px;
  min-width: 240px;
  max-width: 100%;
  margin: 0;
}
.story-subscribe--{{ section.id }} button {
  background-color: #e63946;
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
}
.story-subscribe--{{ section.id }} button:hover {
  background-color: #d62839;
}
{% endstyle %}

<section class="story-subscribe--{{ section.id }}"> 
  <div class="klaviyo-form-TmEPZB"></div>
</section>




<script>
  document.addEventListener("DOMContentLoaded", function () {
    const klaviyoForm3 = document.querySelector(".klaviyo-form-TmEPZB");
    const sectionWrapper = document.querySelector(".story-subscribe--{{ section.id }}");

    // Wait a little for Klaviyo form to load
    setTimeout(() => {
      if (klaviyoForm3 && klaviyoForm3.innerHTML.trim() === "") {
        sectionWrapper.style.display = "none";
      }
    }, 1500); // Adjust timing as needed based on Klaviyo's load behavior
  });
</script>